<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health & Wellness Survey</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Karla:wght@300;400;600;700&family=Spectral:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary: #2d6a4f;
            --primary-light: #40916c;
            --primary-dark: #1b4332;
            --accent: #f4845f;
            --accent-light: #f7a583;
            --bg-main: #fdfdf9;
            --bg-section: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #5a5a5a;
            --border: #e0e0d8;
            --success: #52b788;
            --warning: #f4a261;
        }

        .dark {
            --primary: #52b788;
            --primary-light: #74c69d;
            --primary-dark: #2d6a4f;
            --accent: #f4845f;
            --accent-light: #f7a583;
            --bg-main: #0f1419;
            --bg-section: #1a1f26;
            --text-primary: #e8e8e8;
            --text-secondary: #a0a0a0;
            --border: #2a2f36;
            --success: #74c69d;
            --warning: #f4a261;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Karla', sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background 0.3s ease, color 0.3s ease;
        }

        h1, h2, h3 {
            font-family: 'Spectral', serif;
            font-weight: 700;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
            color: white;
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: white;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .progress-container {
            background: var(--bg-section);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 2px solid var(--border);
            animation: fadeIn 0.6s ease-out 0.1s both;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .progress-bar-container {
            width: 100%;
            height: 12px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 10px;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .section {
            background: var(--bg-section);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            border: 2px solid var(--border);
            display: none;
            animation: fadeIn 0.6s ease-out;
        }

        .section.active {
            display: block;
        }

        .section h2 {
            color: var(--primary);
            margin-bottom: 25px;
            font-size: 1.8rem;
            border-bottom: 3px solid var(--accent);
            padding-bottom: 10px;
        }

        .question {
            margin-bottom: 30px;
        }

        .question label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1.05rem;
            color: var(--text-primary);
        }

        .question input[type="text"],
        .question input[type="number"],
        .question input[type="email"],
        .question select,
        .question textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Karla', sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .question input:focus,
        .question select:focus,
        .question textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(45, 106, 79, 0.1);
        }

        .dark .question input:focus,
        .dark .question select:focus,
        .dark .question textarea:focus {
            box-shadow: 0 0 0 3px rgba(82, 183, 136, 0.2);
        }

        .question textarea {
            min-height: 100px;
            resize: vertical;
        }

        .radio-group,
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .radio-option,
        .checkbox-option {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--bg-main);
        }

        .radio-option:hover,
        .checkbox-option:hover {
            border-color: var(--primary-light);
            background: var(--bg-section);
        }

        .radio-option input[type="radio"],
        .checkbox-option input[type="checkbox"] {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .slider-container {
            padding: 10px 0;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: var(--border);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            background: var(--primary-dark);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: none;
        }

        .slider-value {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .slider-current {
            font-weight: 600;
            color: var(--primary);
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 14px 28px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            font-family: 'Karla', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            flex: 1;
            min-width: 140px;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(45, 106, 79, 0.3);
        }

        .btn-secondary {
            background: var(--border);
            color: var(--text-primary);
            flex: 1;
            min-width: 140px;
        }

        .btn-secondary:hover {
            background: var(--text-secondary);
            color: white;
        }

        .btn-accent {
            background: var(--accent);
            color: white;
        }

        .btn-accent:hover {
            background: #e67350;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(244, 132, 95, 0.3);
        }

        .results {
            display: none;
        }

        .results.active {
            display: block;
        }

        .score-card {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            animation: scaleIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .score-card h2 {
            color: white;
            font-size: 2.2rem;
            margin-bottom: 15px;
        }

        .score-number {
            font-size: 4rem;
            font-weight: 700;
            font-family: 'Spectral', serif;
            margin: 20px 0;
        }

        .category-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-card {
            background: var(--bg-section);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 25px;
            animation: fadeIn 0.6s ease-out;
        }

        .category-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .category-score {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            font-family: 'Spectral', serif;
        }

        .chart-container {
            background: var(--bg-section);
            border: 2px solid var(--border);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        .recommendations {
            background: var(--bg-section);
            border: 2px solid var(--border);
            border-left: 6px solid var(--accent);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            animation: fadeIn 0.6s ease-out 0.3s both;
        }

        .recommendations h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .recommendations ul {
            list-style: none;
            padding: 0;
        }

        .recommendations li {
            padding: 12px 0;
            padding-left: 30px;
            position: relative;
            border-bottom: 1px solid var(--border);
        }

        .recommendations li:last-child {
            border-bottom: none;
        }

        .recommendations li::before {
            content: "✓";
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: 700;
            font-size: 1.2rem;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .section {
                padding: 20px;
            }

            .button-group {
                flex-direction: column;
            }

            .btn-primary,
            .btn-secondary {
                width: 100%;
            }

            .score-number {
                font-size: 3rem;
            }
        }

        /* Dark mode setup */
        @media (prefers-color-scheme: dark) {
            :root {
                color-scheme: dark;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Health & Wellness Survey</h1>
            <p>Take a comprehensive assessment of your health and lifestyle</p>
        </div>

        <div id="surveyContainer">
            <div class="progress-container">
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="progress-text">
                    <span id="progressText">Section 1 of 5</span>
                    <span id="progressPercent">0%</span>
                </div>
            </div>

            <!-- Section 1: Basic Information -->
            <div class="section active" id="section1">
                <h2>Basic Information</h2>
                <div class="question">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" placeholder="Enter your full name">
                </div>
                <div class="question">
                    <label for="age">Age</label>
                    <input type="number" id="age" min="1" max="120" placeholder="Enter your age">
                </div>
                <div class="question">
                    <label for="gender">Gender</label>
                    <select id="gender">
                        <option value="">Select...</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="non-binary">Non-binary</option>
                        <option value="prefer-not-to-say">Prefer not to say</option>
                    </select>
                </div>
                <div class="question">
                    <label for="height">Height (cm)</label>
                    <input type="number" id="height" min="50" max="300" placeholder="Enter your height">
                </div>
                <div class="question">
                    <label for="weight">Weight (kg)</label>
                    <input type="number" id="weight" min="20" max="300" placeholder="Enter your weight">
                </div>
                <div class="button-group">
                    <button class="btn-primary" onclick="nextSection(1)">Next →</button>
                </div>
            </div>

            <!-- Section 2: Lifestyle -->
            <div class="section" id="section2">
                <h2>Lifestyle & Habits</h2>
                <div class="question">
                    <label>How many hours of sleep do you get per night on average?</label>
                    <div class="slider-container">
                        <input type="range" id="sleep" class="slider" min="0" max="12" step="0.5" value="7">
                        <div class="slider-value">
                            <span>0 hours</span>
                            <span class="slider-current" id="sleepValue">7 hours</span>
                            <span>12 hours</span>
                        </div>
                    </div>
                </div>
                <div class="question">
                    <label>How often do you exercise per week?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="exercise" value="0">
                            <span>Never</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="exercise" value="1-2">
                            <span>1-2 times per week</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="exercise" value="3-4">
                            <span>3-4 times per week</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="exercise" value="5+">
                            <span>5+ times per week</span>
                        </label>
                    </div>
                </div>
                <div class="question">
                    <label>Do you smoke?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="smoking" value="never">
                            <span>Never</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="smoking" value="former">
                            <span>Former smoker</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="smoking" value="occasionally">
                            <span>Occasionally</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="smoking" value="regularly">
                            <span>Regularly</span>
                        </label>
                    </div>
                </div>
                <div class="question">
                    <label>How many alcoholic drinks do you have per week?</label>
                    <div class="slider-container">
                        <input type="range" id="alcohol" class="slider" min="0" max="20" step="1" value="0">
                        <div class="slider-value">
                            <span>0 drinks</span>
                            <span class="slider-current" id="alcoholValue">0 drinks</span>
                            <span>20+ drinks</span>
                        </div>
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="previousSection(2)">← Previous</button>
                    <button class="btn-primary" onclick="nextSection(2)">Next →</button>
                </div>
            </div>

            <!-- Section 3: Nutrition -->
            <div class="section" id="section3">
                <h2>Nutrition & Diet</h2>
                <div class="question">
                    <label>How many servings of fruits and vegetables do you eat daily?</label>
                    <div class="slider-container">
                        <input type="range" id="fruitsVeggies" class="slider" min="0" max="10" step="1" value="3">
                        <div class="slider-value">
                            <span>0 servings</span>
                            <span class="slider-current" id="fruitsVeggiesValue">3 servings</span>
                            <span>10+ servings</span>
                        </div>
                    </div>
                </div>
                <div class="question">
                    <label>How many glasses of water do you drink daily?</label>
                    <div class="slider-container">
                        <input type="range" id="water" class="slider" min="0" max="12" step="1" value="6">
                        <div class="slider-value">
                            <span>0 glasses</span>
                            <span class="slider-current" id="waterValue">6 glasses</span>
                            <span>12+ glasses</span>
                        </div>
                    </div>
                </div>
                <div class="question">
                    <label>How often do you eat fast food or processed meals?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="fastfood" value="never">
                            <span>Never</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="fastfood" value="rarely">
                            <span>Rarely (once a month or less)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="fastfood" value="sometimes">
                            <span>Sometimes (1-3 times per week)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="fastfood" value="often">
                            <span>Often (4+ times per week)</span>
                        </label>
                    </div>
                </div>
                <div class="question">
                    <label>Do you follow any specific diet?</label>
                    <select id="diet">
                        <option value="">Select...</option>
                        <option value="none">No specific diet</option>
                        <option value="vegetarian">Vegetarian</option>
                        <option value="vegan">Vegan</option>
                        <option value="keto">Keto</option>
                        <option value="paleo">Paleo</option>
                        <option value="mediterranean">Mediterranean</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="previousSection(3)">← Previous</button>
                    <button class="btn-primary" onclick="nextSection(3)">Next →</button>
                </div>
            </div>

            <!-- Section 4: Mental Health -->
            <div class="section" id="section4">
                <h2>Mental Health & Well-being</h2>
                <div class="question">
                    <label>How would you rate your overall stress level?</label>
                    <div class="slider-container">
                        <input type="range" id="stress" class="slider" min="1" max="10" step="1" value="5">
                        <div class="slider-value">
                            <span>Low (1)</span>
                            <span class="slider-current" id="stressValue">5</span>
                            <span>High (10)</span>
                        </div>
                    </div>
                </div>
                <div class="question">
                    <label>How often do you feel anxious or worried?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="anxiety" value="never">
                            <span>Never</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="anxiety" value="rarely">
                            <span>Rarely</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="anxiety" value="sometimes">
                            <span>Sometimes</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="anxiety" value="often">
                            <span>Often</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="anxiety" value="always">
                            <span>Always</span>
                        </label>
                    </div>
                </div>
                <div class="question">
                    <label>Do you practice any stress-relief activities?</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option">
                            <input type="checkbox" name="stressRelief" value="meditation">
                            <span>Meditation</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="stressRelief" value="yoga">
                            <span>Yoga</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="stressRelief" value="exercise">
                            <span>Exercise</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="stressRelief" value="hobbies">
                            <span>Hobbies</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="stressRelief" value="therapy">
                            <span>Therapy/Counseling</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="stressRelief" value="none">
                            <span>None</span>
                        </label>
                    </div>
                </div>
                <div class="question">
                    <label>How satisfied are you with your work-life balance?</label>
                    <div class="slider-container">
                        <input type="range" id="workLife" class="slider" min="1" max="10" step="1" value="5">
                        <div class="slider-value">
                            <span>Poor (1)</span>
                            <span class="slider-current" id="workLifeValue">5</span>
                            <span>Excellent (10)</span>
                        </div>
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="previousSection(4)">← Previous</button>
                    <button class="btn-primary" onclick="nextSection(4)">Next →</button>
                </div>
            </div>

            <!-- Section 5: Medical History -->
            <div class="section" id="section5">
                <h2>Medical History</h2>
                <div class="question">
                    <label>Do you have any chronic health conditions?</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option">
                            <input type="checkbox" name="conditions" value="diabetes">
                            <span>Diabetes</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="conditions" value="hypertension">
                            <span>High Blood Pressure</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="conditions" value="heart">
                            <span>Heart Disease</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="conditions" value="asthma">
                            <span>Asthma</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="conditions" value="arthritis">
                            <span>Arthritis</span>
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="conditions" value="none">
                            <span>None</span>
                        </label>
                    </div>
                </div>
                <div class="question">
                    <label>How often do you visit a doctor for check-ups?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="checkups" value="regular">
                            <span>Regularly (annually or more)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="checkups" value="occasionally">
                            <span>Occasionally (every 2-3 years)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="checkups" value="rarely">
                            <span>Rarely (only when sick)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="checkups" value="never">
                            <span>Never</span>
                        </label>
                    </div>
                </div>
                <div class="question">
                    <label>Are you currently taking any medications?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="medications" value="yes">
                            <span>Yes</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="medications" value="no">
                            <span>No</span>
                        </label>
                    </div>
                </div>
                <div class="question">
                    <label>Any additional health concerns or comments?</label>
                    <textarea id="comments" placeholder="Share any other health information you'd like to mention..."></textarea>
                </div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="previousSection(5)">← Previous</button>
                    <button class="btn-primary" onclick="submitSurvey()">Submit Survey</button>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results" id="results">
            <div class="score-card">
                <h2>Your Health Score</h2>
                <div class="score-number" id="totalScore">--</div>
                <p id="scoreDescription">--</p>
            </div>

            <div class="category-results" id="categoryResults"></div>

            <div class="chart-container">
                <canvas id="healthChart"></canvas>
            </div>

            <div class="recommendations">
                <h3>Personalized Recommendations</h3>
                <ul id="recommendationsList"></ul>
            </div>

            <div class="button-group">
                <button class="btn-secondary" onclick="restartSurvey()">Take Survey Again</button>
                <button class="btn-accent" onclick="downloadResults()">Download Results</button>
            </div>
        </div>
    </div>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        let currentSection = 1;
        const totalSections = 5;
        let surveyData = {};

        // Slider updates
        const sliders = [
            { id: 'sleep', valueId: 'sleepValue', suffix: ' hours' },
            { id: 'alcohol', valueId: 'alcoholValue', suffix: ' drinks' },
            { id: 'fruitsVeggies', valueId: 'fruitsVeggiesValue', suffix: ' servings' },
            { id: 'water', valueId: 'waterValue', suffix: ' glasses' },
            { id: 'stress', valueId: 'stressValue', suffix: '' },
            { id: 'workLife', valueId: 'workLifeValue', suffix: '' }
        ];

        sliders.forEach(slider => {
            const element = document.getElementById(slider.id);
            const valueElement = document.getElementById(slider.valueId);
            element.addEventListener('input', (e) => {
                valueElement.textContent = e.target.value + slider.suffix;
            });
        });

        function updateProgress() {
            const progress = (currentSection / totalSections) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Section ${currentSection} of ${totalSections}`;
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
        }

        function nextSection(section) {
            document.getElementById(`section${section}`).classList.remove('active');
            currentSection = section + 1;
            document.getElementById(`section${currentSection}`).classList.add('active');
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function previousSection(section) {
            document.getElementById(`section${section}`).classList.remove('active');
            currentSection = section - 1;
            document.getElementById(`section${currentSection}`).classList.add('active');
            updateProgress();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function collectSurveyData() {
            surveyData = {
                name: document.getElementById('name').value,
                age: parseInt(document.getElementById('age').value) || 0,
                gender: document.getElementById('gender').value,
                height: parseFloat(document.getElementById('height').value) || 0,
                weight: parseFloat(document.getElementById('weight').value) || 0,
                sleep: parseFloat(document.getElementById('sleep').value),
                exercise: document.querySelector('input[name="exercise"]:checked')?.value || '',
                smoking: document.querySelector('input[name="smoking"]:checked')?.value || '',
                alcohol: parseFloat(document.getElementById('alcohol').value),
                fruitsVeggies: parseFloat(document.getElementById('fruitsVeggies').value),
                water: parseFloat(document.getElementById('water').value),
                fastfood: document.querySelector('input[name="fastfood"]:checked')?.value || '',
                diet: document.getElementById('diet').value,
                stress: parseFloat(document.getElementById('stress').value),
                anxiety: document.querySelector('input[name="anxiety"]:checked')?.value || '',
                stressRelief: Array.from(document.querySelectorAll('input[name="stressRelief"]:checked')).map(e => e.value),
                workLife: parseFloat(document.getElementById('workLife').value),
                conditions: Array.from(document.querySelectorAll('input[name="conditions"]:checked')).map(e => e.value),
                checkups: document.querySelector('input[name="checkups"]:checked')?.value || '',
                medications: document.querySelector('input[name="medications"]:checked')?.value || '',
                comments: document.getElementById('comments').value
            };
        }

        function calculateScores() {
            let scores = {
                lifestyle: 0,
                nutrition: 0,
                mental: 0,
                medical: 0
            };

            // Lifestyle score (0-100)
            // Sleep (optimal 7-9 hours)
            const sleepScore = surveyData.sleep >= 7 && surveyData.sleep <= 9 ? 30 :
                             surveyData.sleep >= 6 && surveyData.sleep <= 10 ? 20 : 10;

            // Exercise
            const exerciseScore = surveyData.exercise === '5+' ? 30 :
                                surveyData.exercise === '3-4' ? 20 :
                                surveyData.exercise === '1-2' ? 10 : 0;

            // Smoking
            const smokingScore = surveyData.smoking === 'never' ? 20 :
                               surveyData.smoking === 'former' ? 15 :
                               surveyData.smoking === 'occasionally' ? 5 : 0;

            // Alcohol
            const alcoholScore = surveyData.alcohol <= 2 ? 20 :
                               surveyData.alcohol <= 7 ? 15 :
                               surveyData.alcohol <= 14 ? 10 : 0;

            scores.lifestyle = sleepScore + exerciseScore + smokingScore + alcoholScore;

            // Nutrition score (0-100)
            // Fruits and vegetables
            const fruitsVeggiesScore = surveyData.fruitsVeggies >= 5 ? 30 :
                                      surveyData.fruitsVeggies >= 3 ? 20 : 10;

            // Water
            const waterScore = surveyData.water >= 8 ? 30 :
                             surveyData.water >= 6 ? 20 : 10;

            // Fast food
            const fastfoodScore = surveyData.fastfood === 'never' ? 25 :
                                surveyData.fastfood === 'rarely' ? 20 :
                                surveyData.fastfood === 'sometimes' ? 10 : 0;

            // Diet
            const dietScore = surveyData.diet !== '' ? 15 : 10;

            scores.nutrition = fruitsVeggiesScore + waterScore + fastfoodScore + dietScore;

            // Mental health score (0-100)
            // Stress (inverted, lower is better)
            const stressScore = surveyData.stress <= 3 ? 30 :
                              surveyData.stress <= 5 ? 20 :
                              surveyData.stress <= 7 ? 10 : 5;

            // Anxiety
            const anxietyScore = surveyData.anxiety === 'never' ? 25 :
                               surveyData.anxiety === 'rarely' ? 20 :
                               surveyData.anxiety === 'sometimes' ? 15 :
                               surveyData.anxiety === 'often' ? 10 : 5;

            // Stress relief activities
            const stressReliefScore = surveyData.stressRelief.length > 0 &&
                                     !surveyData.stressRelief.includes('none') ? 20 : 5;

            // Work-life balance
            const workLifeScore = surveyData.workLife >= 7 ? 25 :
                                surveyData.workLife >= 5 ? 15 : 5;

            scores.mental = stressScore + anxietyScore + stressReliefScore + workLifeScore;

            // Medical score (0-100)
            // Conditions (inverted)
            const conditionsScore = surveyData.conditions.includes('none') ||
                                  surveyData.conditions.length === 0 ? 40 :
                                  surveyData.conditions.length === 1 ? 30 :
                                  surveyData.conditions.length === 2 ? 20 : 10;

            // Checkups
            const checkupsScore = surveyData.checkups === 'regular' ? 30 :
                                surveyData.checkups === 'occasionally' ? 20 :
                                surveyData.checkups === 'rarely' ? 10 : 5;

            // Medications
            const medicationsScore = surveyData.medications === 'no' ? 30 : 20;

            scores.medical = conditionsScore + checkupsScore + medicationsScore;

            // Calculate BMI bonus/penalty
            if (surveyData.height > 0 && surveyData.weight > 0) {
                const bmi = surveyData.weight / ((surveyData.height / 100) ** 2);
                const bmiBonus = bmi >= 18.5 && bmi < 25 ? 5 :
                               bmi >= 17 && bmi < 30 ? 0 : -5;
                scores.lifestyle += bmiBonus;
            }

            // Overall score
            const totalScore = Math.round((scores.lifestyle + scores.nutrition + scores.mental + scores.medical) / 4);

            return { ...scores, total: totalScore };
        }

        function getScoreDescription(score) {
            if (score >= 85) return 'Excellent! Your health habits are outstanding.';
            if (score >= 70) return 'Very Good! You\'re doing well with your health.';
            if (score >= 55) return 'Good! There\'s room for improvement.';
            if (score >= 40) return 'Fair. Consider making some health improvements.';
            return 'Needs Attention. Focus on improving your health habits.';
        }

        function generateRecommendations(scores) {
            const recommendations = [];

            if (scores.lifestyle < 70) {
                if (surveyData.sleep < 7 || surveyData.sleep > 9) {
                    recommendations.push('Aim for 7-9 hours of sleep each night for optimal health');
                }
                if (surveyData.exercise !== '5+' && surveyData.exercise !== '3-4') {
                    recommendations.push('Increase physical activity to at least 3-4 times per week');
                }
                if (surveyData.smoking !== 'never' && surveyData.smoking !== 'former') {
                    recommendations.push('Consider quitting smoking - consult with a healthcare provider');
                }
                if (surveyData.alcohol > 7) {
                    recommendations.push('Reduce alcohol consumption to moderate levels');
                }
            }

            if (scores.nutrition < 70) {
                if (surveyData.fruitsVeggies < 5) {
                    recommendations.push('Increase fruit and vegetable intake to at least 5 servings daily');
                }
                if (surveyData.water < 8) {
                    recommendations.push('Drink at least 8 glasses of water daily to stay hydrated');
                }
                if (surveyData.fastfood === 'often' || surveyData.fastfood === 'sometimes') {
                    recommendations.push('Reduce processed and fast food consumption');
                }
            }

            if (scores.mental < 70) {
                if (surveyData.stress > 5) {
                    recommendations.push('Practice stress management techniques like meditation or deep breathing');
                }
                if (surveyData.anxiety === 'often' || surveyData.anxiety === 'always') {
                    recommendations.push('Consider speaking with a mental health professional');
                }
                if (surveyData.stressRelief.length === 0 || surveyData.stressRelief.includes('none')) {
                    recommendations.push('Develop stress-relief activities such as yoga, hobbies, or exercise');
                }
                if (surveyData.workLife < 5) {
                    recommendations.push('Work on improving work-life balance - set boundaries and prioritize self-care');
                }
            }

            if (scores.medical < 70) {
                if (surveyData.checkups !== 'regular') {
                    recommendations.push('Schedule regular annual health check-ups with your doctor');
                }
                if (surveyData.conditions.length > 0 && !surveyData.conditions.includes('none')) {
                    recommendations.push('Ensure chronic conditions are properly managed with medical guidance');
                }
            }

            // BMI recommendation
            if (surveyData.height > 0 && surveyData.weight > 0) {
                const bmi = surveyData.weight / ((surveyData.height / 100) ** 2);
                if (bmi < 18.5) {
                    recommendations.push('Your BMI indicates underweight - consult a nutritionist');
                } else if (bmi >= 25 && bmi < 30) {
                    recommendations.push('Your BMI indicates overweight - consider a balanced diet and exercise plan');
                } else if (bmi >= 30) {
                    recommendations.push('Your BMI indicates obesity - consult with healthcare professionals');
                }
            }

            if (recommendations.length === 0) {
                recommendations.push('Keep up the great work maintaining your healthy lifestyle!');
                recommendations.push('Continue regular health check-ups and preventive care');
                recommendations.push('Stay informed about health and wellness best practices');
            }

            return recommendations;
        }

        function displayResults(scores) {
            document.getElementById('totalScore').textContent = scores.total;
            document.getElementById('scoreDescription').textContent = getScoreDescription(scores.total);

            // Category cards
            const categoryResults = document.getElementById('categoryResults');
            categoryResults.innerHTML = `
                <div class="category-card">
                    <h3>Lifestyle</h3>
                    <div class="category-score">${scores.lifestyle}/100</div>
                </div>
                <div class="category-card">
                    <h3>Nutrition</h3>
                    <div class="category-score">${scores.nutrition}/100</div>
                </div>
                <div class="category-card">
                    <h3>Mental Health</h3>
                    <div class="category-score">${scores.mental}/100</div>
                </div>
                <div class="category-card">
                    <h3>Medical</h3>
                    <div class="category-score">${scores.medical}/100</div>
                </div>
            `;

            // Recommendations
            const recommendations = generateRecommendations(scores);
            const recommendationsList = document.getElementById('recommendationsList');
            recommendationsList.innerHTML = recommendations.map(r => `<li>${r}</li>`).join('');

            // Chart
            createChart(scores);
        }

        function createChart(scores) {
            const ctx = document.getElementById('healthChart');

            // Check if a chart already exists and destroy it
            if (window.healthChartInstance) {
                window.healthChartInstance.destroy();
            }

            const isDark = document.documentElement.classList.contains('dark');
            const textColor = isDark ? '#e8e8e8' : '#1a1a1a';
            const gridColor = isDark ? '#2a2f36' : '#e0e0d8';

            window.healthChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Lifestyle', 'Nutrition', 'Mental Health', 'Medical'],
                    datasets: [{
                        label: 'Your Scores',
                        data: [scores.lifestyle, scores.nutrition, scores.mental, scores.medical],
                        backgroundColor: 'rgba(45, 106, 79, 0.2)',
                        borderColor: 'rgba(45, 106, 79, 1)',
                        borderWidth: 3,
                        pointBackgroundColor: 'rgba(244, 132, 95, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(244, 132, 95, 1)',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20,
                                color: textColor
                            },
                            grid: {
                                color: gridColor
                            },
                            pointLabels: {
                                color: textColor,
                                font: {
                                    size: 14,
                                    family: "'Karla', sans-serif",
                                    weight: 600
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function submitSurvey() {
            collectSurveyData();
            const scores = calculateScores();

            document.getElementById('surveyContainer').style.display = 'none';
            document.getElementById('results').classList.add('active');

            displayResults(scores);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function restartSurvey() {
            document.getElementById('results').classList.remove('active');
            document.getElementById('surveyContainer').style.display = 'block';

            // Reset to first section
            for (let i = 1; i <= totalSections; i++) {
                document.getElementById(`section${i}`).classList.remove('active');
            }
            document.getElementById('section1').classList.add('active');
            currentSection = 1;
            updateProgress();

            // Clear form
            document.querySelectorAll('input, select, textarea').forEach(element => {
                if (element.type === 'checkbox' || element.type === 'radio') {
                    element.checked = false;
                } else if (element.type === 'range') {
                    element.value = element.getAttribute('value');
                    const event = new Event('input');
                    element.dispatchEvent(event);
                } else {
                    element.value = '';
                }
            });

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function downloadResults() {
            const scores = calculateScores();
            const recommendations = generateRecommendations(scores);

            let resultsText = `HEALTH & WELLNESS SURVEY RESULTS\n`;
            resultsText += `================================\n\n`;
            resultsText += `Name: ${surveyData.name}\n`;
            resultsText += `Date: ${new Date().toLocaleDateString()}\n\n`;
            resultsText += `OVERALL HEALTH SCORE: ${scores.total}/100\n`;
            resultsText += `${getScoreDescription(scores.total)}\n\n`;
            resultsText += `CATEGORY SCORES:\n`;
            resultsText += `- Lifestyle: ${scores.lifestyle}/100\n`;
            resultsText += `- Nutrition: ${scores.nutrition}/100\n`;
            resultsText += `- Mental Health: ${scores.mental}/100\n`;
            resultsText += `- Medical: ${scores.medical}/100\n\n`;
            resultsText += `RECOMMENDATIONS:\n`;
            recommendations.forEach((rec, idx) => {
                resultsText += `${idx + 1}. ${rec}\n`;
            });
            resultsText += `\n================================\n`;
            resultsText += `This is a general health assessment and not a medical diagnosis.\n`;
            resultsText += `Please consult with healthcare professionals for medical advice.\n`;

            const blob = new Blob([resultsText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `health-survey-results-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Update chart on dark mode change
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
            if (window.healthChartInstance) {
                const scores = calculateScores();
                createChart(scores);
            }
        });

        // Initialize
        updateProgress();
    </script>
</body>
</html>
